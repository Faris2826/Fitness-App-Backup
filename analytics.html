<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics - Rehma's Health Tracker</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
    
    <style>
        :root {
            /* Girly Theme Colors */
            --bg-primary: #FFF5F8;
            --bg-secondary: #FFFFFF;
            --accent-primary: #FF69B4;
            --accent-secondary: #FFB6C1;
            --text-primary: #4A4A4A;
            --text-secondary: #8A8A8A;
            --cycle-glow: #FF69B4;
            
            /* Cycle Phase Colors */
            --menstrual: #E91E63;
            --follicular: #FF69B4;
            --ovulation: #FF1493;
            --luteal: #FFB6C1;
            
            /* Spacing */
            --spacing-xs: 8px;
            --spacing-sm: 16px;
            --spacing-md: 24px;
            --spacing-lg: 32px;
            --spacing-xl: 48px;
            
            /* Typography */
            --font-serif: 'Playfair Display', serif;
            --font-sans: 'Inter', sans-serif;
        }
        
        [data-theme="dark"] {
            --bg-primary: #2D1B2D;
            --bg-secondary: #3D2B3D;
            --accent-primary: #FF8FAB;
            --accent-secondary: #FFB3C1;
            --text-primary: #F5F5F5;
            --text-secondary: #D0D0D0;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: var(--font-sans);
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
        }
        
        /* Dynamic Background Glow */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(ellipse at center, var(--cycle-glow)15 0%, transparent 70%);
            pointer-events: none;
            z-index: -1;
            opacity: 0.4;
            animation: breathe 4s ease-in-out infinite;
        }
        
        @keyframes breathe {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.5; }
        }
        
        /* Header */
        .header {
            padding: var(--spacing-sm);
            background: var(--bg-secondary);
            border-bottom: 1px solid rgba(255, 105, 180, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }
        
        .app-title {
            font-family: var(--font-serif);
            font-size: 24px;
            font-weight: 700;
            color: var(--accent-primary);
        }
        
        .header-controls {
            display: flex;
            gap: var(--spacing-sm);
            align-items: center;
        }
        
        .theme-toggle {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .theme-toggle:hover {
            background: var(--accent-primary)20;
            transform: scale(1.1);
        }
        
        /* Main Content */
        .main-content {
            padding: var(--spacing-md);
            max-width: 1400px;
            margin: 0 auto;
            padding-bottom: 100px;
        }
        
        /* Cards */
        .card {
            background: var(--bg-secondary);
            border-radius: 20px;
            padding: var(--spacing-lg);
            box-shadow: 0 8px 30px rgba(255, 105, 180, 0.1);
            border: 1px solid rgba(255, 105, 180, 0.2);
            transition: all 0.3s ease;
            margin-bottom: var(--spacing-lg);
        }
        
        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(255, 105, 180, 0.15);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }
        
        .card-title {
            font-family: var(--font-serif);
            font-size: 28px;
            font-weight: 600;
            color: var(--accent-primary);
        }
        
        .card-icon {
            font-size: 32px;
            opacity: 0.8;
        }
        
        /* Profile Section */
        .profile-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }
        
        .profile-card {
            background: linear-gradient(135deg, var(--accent-primary)10, var(--accent-secondary)10);
            border: 2px solid var(--accent-primary);
        }
        
        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: white;
            margin: 0 auto var(--spacing-md);
            box-shadow: 0 8px 25px rgba(255, 105, 180, 0.3);
        }
        
        .profile-name {
            text-align: center;
            font-family: var(--font-serif);
            font-size: 24px;
            font-weight: 600;
            color: var(--accent-primary);
            margin-bottom: 4px;
        }
        
        .profile-subtitle {
            text-align: center;
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: var(--spacing-md);
        }
        
        /* Form Styles */
        .form-group {
            margin-bottom: var(--spacing-md);
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 14px;
        }
        
        .form-input {
            width: 100%;
            padding: 16px;
            border: 2px solid rgba(255, 105, 180, 0.3);
            border-radius: 12px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-family: var(--font-sans);
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(255, 105, 180, 0.1);
        }
        
        .form-button {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: white;
            border: none;
            border-radius: 12px;
            padding: 16px 32px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .form-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 105, 180, 0.3);
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
        }
        
        .stat-card {
            background: rgba(255, 105, 180, 0.1);
            border: 1px solid rgba(255, 105, 180, 0.2);
            border-radius: 16px;
            padding: var(--spacing-lg);
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            background: rgba(255, 105, 180, 0.15);
            transform: translateY(-2px);
        }
        
        .stat-value {
            font-size: 36px;
            font-weight: 700;
            color: var(--accent-primary);
            margin-bottom: 8px;
        }
        
        .stat-label {
            font-size: 16px;
            color: var(--text-secondary);
            font-weight: 500;
            margin-bottom: 4px;
        }
        
        .stat-change {
            font-size: 14px;
            margin-top: 8px;
            font-weight: 600;
        }
        
        .stat-change.positive {
            color: #FF69B4;
        }
        
        .stat-change.negative {
            color: #FF1493;
        }
        
        /* Progress Indicators */
        .progress-section {
            margin-bottom: var(--spacing-lg);
        }
        
        .progress-item {
            margin-bottom: var(--spacing-md);
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .progress-label {
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .progress-value {
            font-weight: 600;
            color: var(--accent-primary);
        }
        
        .progress-bar {
            height: 12px;
            background: rgba(255, 105, 180, 0.2);
            border-radius: 6px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 6px;
            transition: width 0.8s ease;
        }
        
        /* Chart Container */
        .chart-container {
            height: 300px;
            margin-bottom: var(--spacing-md);
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--bg-secondary);
            border-top: 1px solid rgba(255, 105, 180, 0.2);
            padding: var(--spacing-sm);
            display: flex;
            justify-content: space-around;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--text-secondary);
            transition: all 0.3s ease;
            padding: 8px;
            border-radius: 12px;
            min-width: 60px;
        }
        
        .nav-item.active {
            color: var(--accent-primary);
            background: rgba(255, 105, 180, 0.1);
        }
        
        .nav-item:hover {
            color: var(--accent-primary);
            transform: translateY(-2px);
        }
        
        .nav-icon {
            font-size: 24px;
            margin-bottom: 4px;
        }
        
        .nav-label {
            font-size: 12px;
            font-weight: 500;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .main-content {
                padding: var(--spacing-sm);
            }
            
            .profile-section {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .card {
                padding: var(--spacing-md);
            }
        }
        
        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .fade-in-up {
            animation: fadeInUp 0.6s ease;
        }
        
        /* Success Message */
        .success-message {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: white;
            padding: var(--spacing-md);
            border-radius: 12px;
            text-align: center;
            margin-bottom: var(--spacing-md);
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from {
                transform: translateY(-20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        /* Hidden */
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <h1 class="app-title">Analytics</h1>
        <div class="header-controls">
            <button class="theme-toggle" aria-label="Toggle theme">üåì</button>
        </div>
    </header>
    
    <!-- Main Content -->
    <main class="main-content">
        <!-- Success Message (Hidden by default) -->
        <div class="success-message hidden" id="success-message">
            ‚ú® Your profile has been updated successfully, beautiful! ‚ú®
        </div>
        
        <!-- Profile Section -->
        <div class="profile-section fade-in-up">
            <div class="card profile-card">
                <div class="profile-avatar">üë∏</div>
                <div class="profile-name">Rehma</div>
                <div class="profile-subtitle">Your Health Journey</div>
                
                <div style="text-align: center; margin-top: var(--spacing-md);">
                    <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 4px;">Member Since</div>
                    <div style="font-weight: 600; color: var(--accent-primary);">October 2024</div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Update Measurements</h2>
                    <span class="card-icon">üìè</span>
                </div>
                
                <form id="measurements-form">
                    <div class="form-group">
                        <label class="form-label" for="weight">Current Weight (kg)</label>
                        <input type="number" id="weight" class="form-input" placeholder="65.0" step="0.1" min="30" max="200" value="65">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="height">Height (cm)</label>
                        <input type="number" id="height" class="form-input" placeholder="165" min="100" max="250" value="165">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="body-fat">Body Fat % (Optional)</label>
                        <input type="number" id="body-fat" class="form-input" placeholder="25" step="0.1" min="5" max="50">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="activity-level">Activity Level</label>
                        <select id="activity-level" class="form-input">
                            <option value="sedentary">Sedentary (little to no exercise)</option>
                            <option value="light" selected>Light (light exercise 1-3 days/week)</option>
                            <option value="moderate">Moderate (moderate exercise 3-5 days/week)</option>
                            <option value="active">Active (hard exercise 6-7 days/week)</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="form-button">Update Profile ‚ú®</button>
                </form>
            </div>
        </div>
        
        <!-- Current Stats -->
        <div class="card fade-in-up">
            <div class="card-header">
                <h2 class="card-title">Your Current Stats</h2>
                <span class="card-icon">üìä</span>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="current-bmr">1,207</div>
                    <div class="stat-label">BMR (calories/day)</div>
                    <div class="stat-change">PCOS adjusted</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-value" id="current-tdee">1,750</div>
                    <div class="stat-label">TDEE (calories/day)</div>
                    <div class="stat-change positive">Moderate activity</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-value" id="current-bmi">23.9</div>
                    <div class="stat-label">BMI</div>
                    <div class="stat-change">Normal range</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-value" id="target-calories">1,487</div>
                    <div class="stat-label">Weight Loss Target</div>
                    <div class="stat-change positive">15% deficit</div>
                </div>
            </div>
        </div>
        
        <!-- Progress Section -->
        <div class="card fade-in-up">
            <div class="card-header">
                <h2 class="card-title">Your Progress</h2>
                <span class="card-icon">üéØ</span>
            </div>
            
            <div class="progress-section">
                <div class="progress-item">
                    <div class="progress-header">
                        <span class="progress-label">Weight Goal Progress</span>
                        <span class="progress-value">75%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 75%;"></div>
                    </div>
                </div>
                
                <div class="progress-item">
                    <div class="progress-header">
                        <span class="progress-label">PCOS Symptom Management</span>
                        <span class="progress-value">85%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 85%;"></div>
                    </div>
                </div>
                
                <div class="progress-item">
                    <div class="progress-header">
                        <span class="progress-label">Cycle Tracking Consistency</span>
                        <span class="progress-value">92%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 92%;"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Insights -->
        <div class="card fade-in-up">
            <div class="card-header">
                <h2 class="card-title">Personal Insights</h2>
                <span class="card-icon">üí°</span>
            </div>
            
            <div style="display: grid; gap: var(--spacing-md);">
                <div style="background: rgba(255, 105, 180, 0.1); padding: var(--spacing-md); border-radius: 12px; border-left: 4px solid var(--accent-primary);">
                    <h4 style="color: var(--accent-primary); margin-bottom: 8px;">üå∏ Cycle Pattern</h4>
                    <p style="font-size: 14px; color: var(--text-secondary);">Your cycles have been averaging 29 days, which is excellent for PCOS management. Keep up the great work!</p>
                </div>
                
                <div style="background: rgba(255, 182, 193, 0.1); padding: var(--spacing-md); border-radius: 12px; border-left: 4px solid var(--accent-secondary);">
                    <h4 style="color: var(--accent-secondary); margin-bottom: 8px;">üíï Weight Loss</h4>
                    <p style="font-size: 14px; color: var(--text-secondary);">You're losing weight at a healthy pace of 0.5kg per week. This is perfect for sustainable PCOS management!</p>
                </div>
                
                <div style="background: rgba(255, 20, 147, 0.1); padding: var(--spacing-md); border-radius: 12px; border-left: 4px solid var(--ovulation);">
                    <h4 style="color: var(--ovulation); margin-bottom: 8px;">‚ú® Recommendations</h4>
                    <p style="font-size: 14px; color: var(--text-secondary);">Consider adding strength training 2-3 times per week to further improve insulin sensitivity and hormone balance.</p>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="index.html" class="nav-item">
            <span class="nav-icon">üè†</span>
            <span class="nav-label">Home</span>
        </a>
        <a href="calendar.html" class="nav-item">
            <span class="nav-icon">üìÖ</span>
            <span class="nav-label">Calendar</span>
        </a>
        <a href="progress.html" class="nav-item">
            <span class="nav-icon">üìä</span>
            <span class="nav-label">Progress</span>
        </a>
        <a href="workouts.html" class="nav-item">
            <span class="nav-icon">üí™</span>
            <span class="nav-label">Workouts</span>
        </a>
        <a href="analytics.html" class="nav-item active">
            <span class="nav-icon">üìà</span>
            <span class="nav-label">Analytics</span>
        </a>
    </nav>
    
    <!-- Main JavaScript -->
    <script src="main.js"></script>
    
    <script>
        // Analytics page functionality
        class AnalyticsManager {
            constructor() {
                this.init();
            }
            
            init() {
                this.setupEventListeners();
                this.loadUserData();
                this.updateCalculations();
            }
            
            setupEventListeners() {
                // Form submission
                document.getElementById('measurements-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.updateMeasurements(new FormData(e.target));
                });
                
                // Real-time calculation updates
                ['weight', 'height', 'body-fat', 'activity-level'].forEach(id => {
                    document.getElementById(id).addEventListener('change', () => {
                        this.updateCalculations();
                    });
                });
                
                // Theme toggle
                document.querySelector('.theme-toggle').addEventListener('click', () => {
                    this.toggleTheme();
                });
            }
            
            loadUserData() {
                // Load data from localStorage or use defaults
                const savedData = localStorage.getItem('rehmaAnalyticsData');
                if (savedData) {
                    const data = JSON.parse(savedData);
                    
                    document.getElementById('weight').value = data.weight || 65;
                    document.getElementById('height').value = data.height || 165;
                    document.getElementById('body-fat').value = data.bodyFat || '';
                    document.getElementById('activity-level').value = data.activityLevel || 'light';
                }
            }
            
            updateMeasurements(formData) {
                const measurements = {
                    weight: parseFloat(formData.get('weight')),
                    height: parseFloat(formData.get('height')),
                    bodyFat: formData.get('body-fat') ? parseFloat(formData.get('body-fat')) : null,
                    activityLevel: formData.get('activity-level'),
                    updatedAt: new Date().toISOString()
                };
                
                // Save to localStorage
                localStorage.setItem('rehmaAnalyticsData', JSON.stringify(measurements));
                
                // Update calculations
                this.updateCalculations();
                
                // Show success message
                this.showSuccessMessage();
                
                // Update main app data if available
                if (window.fitnessTracker) {
                    window.fitnessTracker.userProfile.currentWeight = measurements.weight;
                    window.fitnessTracker.userProfile.height = measurements.height;
                    window.fitnessTracker.userProfile.activityLevel = measurements.activityLevel;
                    window.fitnessTracker.saveData();
                }
            }
            
            updateCalculations() {
                const weight = parseFloat(document.getElementById('weight').value) || 65;
                const height = parseFloat(document.getElementById('height').value) || 165;
                const bodyFat = parseFloat(document.getElementById('body-fat').value) || null;
                const activityLevel = document.getElementById('activity-level').value || 'light';
                const age = 20; // Rehma's age
                
                // BMR Calculation (Mifflin-St Jeor with PCOS adjustment)
                let bmr = (10 * weight) + (6.25 * height) - (5 * age) - 161;
                bmr *= 0.85; // 15% PCOS reduction
                
                // Activity multipliers
                const activityMultipliers = {
                    sedentary: 1.2,
                    light: 1.375,
                    moderate: 1.45,
                    active: 1.6
                };
                
                const tdee = bmr * (activityMultipliers[activityLevel] || 1.375);
                const targetCalories = tdee * 0.85; // 15% deficit
                
                // BMI Calculation
                const bmi = weight / ((height / 100) ** 2);
                
                // Update display
                document.getElementById('current-bmr').textContent = Math.round(bmr).toLocaleString();
                document.getElementById('current-tdee').textContent = Math.round(tdee).toLocaleString();
                document.getElementById('target-calories').textContent = Math.round(targetCalories).toLocaleString();
                document.getElementById('current-bmi').textContent = bmi.toFixed(1);
            }
            
            showSuccessMessage() {
                const message = document.getElementById('success-message');
                message.classList.remove('hidden');
                
                setTimeout(() => {
                    message.classList.add('hidden');
                }, 4000);
            }
            
            toggleTheme() {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
            }
        }
        
        // Initialize analytics manager
        document.addEventListener('DOMContentLoaded', () => {
            new AnalyticsManager();
            
            // Load saved theme
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            
            // Add entrance animations
            document.querySelectorAll('.fade-in-up').forEach((el, index) => {
                el.style.animationDelay = `${index * 0.1}s`;
            });
        });
    </script>
</body>
</html>